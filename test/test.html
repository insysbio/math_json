<!DOCTYPE html>
<html>

<head>
    <title>Test page</title>
  <!-- подключаем стили Mocha, для отображения результатов -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
  <!-- подключаем библиотеку Mocha -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.js"></script>
  <!-- настраиваем Mocha: предстоит BDD-тестирование -->
  <script>
    mocha.setup('bdd');
  </script>
  <!-- подключаем chai -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/2.0.0/chai.js"></script>
  <!-- в chai есть много всего, выносим assert в глобальную область -->
  <script>
    var assert = chai.assert;
  </script>
  <!-- include test function: parseAsciiMath.js,mathsjs2cMathML.js -->
  <script src="../script/outer/math.min.js"></script>
   <script src="../script/parseAsciiMath.js"></script>
  <script src="../script/mathsjs2cMathML.js"></script>  
  <!-- в этом скрипте находятся спеки и материал для теста-->
  <script src="test_matherial/test_formula.js"></script>
  <script src="test_matherial/expected_result.js"></script> 
  <script src="test_matherial/simple_test.js"></script>
  <script src="test_matherial/expected_simple.js"></script>   
  <script src="test.js"></script>
  <style>
    textarea{
        height: 250px;
        width: 400px;
        overflow: auto;
    }
  </style>
</head>

<body>
<!-- в элементе с id="mocha" будут результаты тестов -->
<div id="mocha"></div>

<div id="view1"></div>
<hr/>
<div id="view2"></div>
<!-- запустить тесты! -->
<script>
mocha.run();

var oSerializer = new XMLSerializer();
for(var i = 2; i < test_formula.length; i++) {
    var xml = oSerializer.serializeToString( parseAsciiMath(test_formula[i]) );
    if (xml != expected[i]) {
    document.getElementById("view1").innerHTML += "<div id='output"+i+"'><h3>formula "+i+" "+test_formula[i]+"</h3><textarea>Generate\n"+xml.replace(new RegExp("><","g"),'>\n<')+"</textarea><textarea>DBSolve\n"+expected[i].replace(new RegExp("><","g"),'>\n<')+"</textarea></div>";
    }
}
</script>

<script>
for(var i = 0; i < expected_simple.length; i++) {
    var xml = oSerializer.serializeToString( parseAsciiMath(simple_test_formula[i]) );
    if (xml != expected_simple[i]) {
    document.getElementById("view2").innerHTML += "<div id='output"+i+"'><h3>formula "+i+" "+simple_test_formula[i]+"</h3><textarea>Generate\n"+xml.replace(new RegExp("><","g"),'>\n<')+"</textarea><textarea>DBSolve\n"+expected_simple[i].replace(new RegExp("><","g"),'>\n<')+"</textarea></div>";
    }
}


</script>

</body>
</html>