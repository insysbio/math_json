<!DOCTYPE HTML>
<html>
<head>
<title>Work with math.js</title>
<link rel="stylesheet" href="style.css"/>
<script type="text/javascript" async src="https://code.jquery.com/jquery-1.8.3.js"></script>
<script>window.MathJax = { MathML: { extensions: ["mml3.js", "content-mathml.js"]}};</script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="script/outer/math.min.js"></script>
<script src="script/math_examples.js"></script>
<script src="script/json_print.js"></script>
<script src="script/func.js"></script>
<script src="script/mathsjs2cMathML.js"></script>
<script src="script/parseAsciiMath.js"></script>
</head>
<body>

<div id="navigate">
	<h2>Navigate</h2>
</div>
<br/>
<button onclick='compact(-1)'>Compact</button><button onclick='full(-1)'>Full</button>

<script type="text/javascript">
var node, cont;
for(var i = 0;i<examples.length;i++){ 
	/*Generate <div> with information about formula*/
	document.write("<div id='data"+i+"'>");
		document.write("<h2>Example #"+i+"</h2>");
		document.write("<h3>input <b>"+examples[i]+"</b></h3>");
		document.write("<button onclick='compact("+i+")'>Compact</button><button onclick='full("+i+")'>Full</button></br>");
		document.write("<div id='json"+i+"' class='json'></div>");//Place for JSON
		document.write("<button onclick='compact("+i+")'>Compact</button><button onclick='full("+i+")'>Full</button></br>");
		document.write("<br/>");
		document.write('<h3>cMathML</h3>');
		document.write('<textarea id="textarea'+i+'" required></textarea>');//Place for cMathML
		document.write("<br/>");
		document.write('<table border="1px">');//Table for display formula
			document.write('<tr>');//Mathjs
				document.write('<td align="center">from MathsJS</td>');
				document.write('<td id="formula'+i+'"></td>');				
			document.write('</tr>');
			document.write('<tr>');//cMathML
				document.write('<td align="center">from cMathML</td>');
				document.write('<td id="cformula'+i+'"></td>');
			document.write('</tr>');			
		document.write('</table>');
		document.write("<a href='#navigate'>Up</a></br>");
		document.write("<hr/>");
	document.write("</div>");
	
    var mathML = parseAsciiMath(examples[i]);
    
	/*for output formaula(from parse math.js)*/
    var formula = node.toTex();	
	formula = formula.replace(new RegExp("_",'g'),"\\_");//Screening '_'
    
    /*for output cMathML-code*/
    cont = print_json(cont); //Get JSON with &nbsp; and <br/> for output
	var oSerializer = new XMLSerializer();
	sXML = oSerializer.serializeToString(mathML);
    
	/* Fill in <div>*/
	document.getElementById('formula'+i).innerHTML = '$$'+formula+'$$';
	document.getElementById('json'+i).innerHTML += cont+'<br/>';	
	document.getElementById('navigate').innerHTML += '<a href="#data'+i+'">Example #'+i+'</a><br/>';
	document.getElementById('textarea'+i).innerHTML = sXML.replace(new RegExp("><","g"),'>\n<');
	document.getElementById('cformula'+i).innerHTML = sXML;
	
	}
</script>	

</body>
</html>
